<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="Phil Bingham" />
    <meta name="generator" content="Pelican (VoidyBootstrap theme)" />

    <title>Collaborative Filtering for Movie Recommendations - Phil Bingham's Data Science Portfolio</title>

        <link rel="stylesheet"
              href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
              integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
              crossorigin="anonymous" />
      <link rel="stylesheet"
            href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
            integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
            crossorigin="anonymous">


      <link rel="stylesheet" href="https://hexhamallstar.github.io/theme/css/pygment.css" />
      <link rel="stylesheet" href="https://hexhamallstar.github.io/theme/css/voidybootstrap.css" />

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js" integrity="sha384-FFgGfda92tXC8nCNOxrCQ3R8x1TNkMFqDZVQdDaaJiiVbjkPBXIJBx0o7ETjy8Bh" crossorigin="anonymous"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js" integrity="sha384-ZoaMbDF+4LeFxg6WdScQ9nnR1QC2MIRxA1O9KWEXQwns1G8UNyIEZIQidzb0T1fo" crossorigin="anonymous"></script>
    <![endif]-->

    <link rel="shortcut icon" href="https://hexhamallstar.github.io/favicon.ico" />
  </head>

  <body>
    <nav class="navbar navbar-default">
      <div class="container">
	   <div class="navbar-header">
		<button type="button" class="navbar-toggle"
				data-toggle="collapse" data-target="#main-navbar-collapse">
		  <span class="sr-only">Toggle navigation</span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		</button>
		<a class="navbar-brand" href="https://hexhamallstar.github.io/" rel="home">
          <i class="fa fa-home fa-fw fa-lg"> </i> </a>
       </div>

      <div class="collapse navbar-collapse" id="main-navbar-collapse">
        <ul class="nav navbar-nav">
              <li>
                <a href="https://hexhamallstar.github.io/pages/about.html">About Me</a>
              </li>
            <li class="divider"></li>
            <li class="">
              <a href="https://hexhamallstar.github.io/archives.html">Archives</a>
            </li>
          <li class="divider"></li>
        </ul> <!-- /nav -->
      </div> <!-- /navbar-collapse -->
	  </div> <!-- /container -->
    </nav> <!-- /navbar -->

	<div class="jumbotron" id="overview">
	  <div class="container">
		<h1><a href="https://hexhamallstar.github.io/">Phil Bingham's Data Science Portfolio</a></h1>
		<p class="lead">A collection of my personal data science/machine learning work.</p>
	  </div>
	</div>

    <div class="container" id="main-container">
      <div class="row">
        <div class="col-md-9" id="content">
<article itemscope="itemscope" itemtype="http://schema.org/BlogPosting">
  <header class="article-header">
<abbr class="article-header-date">
  Wed 18 April 2018
</abbr> <h1>
  <a href="https://hexhamallstar.github.io/movie-rec.html" rel="bookmark"
     title="Permalink to Collaborative Filtering for Movie Recommendations">
    Collaborative Filtering for Movie Recommendations
  </a>
</h1><div class="article-header-info">
  <p>
      Posted by <a href="https://hexhamallstar.github.io/author/phil-bingham.html">Phil Bingham</a>
    in 
    <a href="https://hexhamallstar.github.io/category/notebooks.html">
      Notebooks</a>
    &nbsp;&nbsp;
  </p>
</div> <!-- /.article-header-info -->  </header>
  <div class="content-body" itemprop="text articleBody">
	<style type="text/css">/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI colors. */
.ansibold {
  font-weight: bold;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  border-left-width: 1px;
  padding-left: 5px;
  background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%);
}
div.cell.jupyter-soft-selected {
  border-left-color: #90CAF9;
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected {
  border-color: #ababab;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%);
}
@media print {
  div.cell.selected {
    border-color: transparent;
  }
}
div.cell.selected.jupyter-soft-selected {
  border-left-width: 0;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 7px, #E3F2FD 7px, #E3F2FD 100%);
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #66BB6A -40px, #66BB6A 5px, transparent 5px, transparent 100%);
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell > div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area > div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area > div.highlight > pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the <head> if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  padding: 0.4em;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. We need the 0 value because of how we size */
  /* .CodeMirror-lines */
  padding: 0;
  border: 0;
  border-radius: 0;
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}


.rendered_html pre,



.rendered_html tr,
.rendered_html th,

.rendered_html td,


.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,

div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell > div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
</style>
<style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style>
<style type="text/css">
/* Temporary definitions which will become obsolete with Notebook release 5.0 */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Recommender Systems are a huge part of our daily lives and are used in almost all online services in one form or another. They are used to suggest things we might like to buy, movies we might like to watch and people that we might like to add to our social network.</p>
<p>The benefits of Recommender Systems are two-fold. Firstly, from a customer/user perspective, getting accurate recommendations will mean that less time is spent searching for the correct item/time is not wasted on incorrect items, which improves the user experience. From a service-provider perspective, users are more likely to interact if the user experience is good. More accurate recommendations lead to more interactions and usually to higher revenue.</p>
<p>In this notebook I will be exploring the <a href="https://grouplens.org/datasets/movielens/">MovieLens dataset</a>, a repository of over 26,000,000 movie ratings given to 45,000 movies by 270,000 users. Many thanks to them for collecting this data and making it available to the public.</p>
<h2 id="This-notebook-contains-the-following-content:">This notebook contains the following content:<a class="anchor-link" href="#This-notebook-contains-the-following-content:">¶</a></h2><ul>
<li><a href="#first-bullet">1. Data Exploration</a></li>
<li><a href="#second-bullet">2. Building the Recommender System</a></li>
<li><a href="#third-bullet">3. Improvements/Further Work</a></li>
</ul>
<h2 id="1.-Data-Exploration-">1. Data Exploration <a class="anchor" id="first-bullet"></a><a class="anchor-link" href="#1.-Data-Exploration-">¶</a></h2><p>It is always important to understand the data before we dive into model building. We can even potentially get interesting information from simple plots &amp; analysis. The first step is to import the data and look at the rows/columns present:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ratings</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">'Movie Recommender/ratings.csv'</span><span class="p">)</span>
<span class="n">movies</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">'Movie Recommender/movies.csv'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ratings</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[3]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>userId</th>
<th>movieId</th>
<th>rating</th>
<th>timestamp</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>1</td>
<td>110</td>
<td>1.0</td>
<td>1425941529</td>
</tr>
<tr>
<th>1</th>
<td>1</td>
<td>147</td>
<td>4.5</td>
<td>1425942435</td>
</tr>
<tr>
<th>2</th>
<td>1</td>
<td>858</td>
<td>5.0</td>
<td>1425941523</td>
</tr>
<tr>
<th>3</th>
<td>1</td>
<td>1221</td>
<td>5.0</td>
<td>1425941546</td>
</tr>
<tr>
<th>4</th>
<td>1</td>
<td>1246</td>
<td>5.0</td>
<td>1425941556</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">movies</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[4]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>movieId</th>
<th>title</th>
<th>genres</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>1</td>
<td>Toy Story (1995)</td>
<td>Adventure|Animation|Children|Comedy|Fantasy</td>
</tr>
<tr>
<th>1</th>
<td>2</td>
<td>Jumanji (1995)</td>
<td>Adventure|Children|Fantasy</td>
</tr>
<tr>
<th>2</th>
<td>3</td>
<td>Grumpier Old Men (1995)</td>
<td>Comedy|Romance</td>
</tr>
<tr>
<th>3</th>
<td>4</td>
<td>Waiting to Exhale (1995)</td>
<td>Comedy|Drama|Romance</td>
</tr>
<tr>
<th>4</th>
<td>5</td>
<td>Father of the Bride Part II (1995)</td>
<td>Comedy</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ratings</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 26024289 entries, 0 to 26024288
Data columns (total 4 columns):
userId       int64
movieId      int64
rating       float64
timestamp    int64
dtypes: float64(1), int64(3)
memory usage: 794.2 MB
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [6]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">movies</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 45843 entries, 0 to 45842
Data columns (total 3 columns):
movieId    45843 non-null int64
title      45843 non-null object
genres     45843 non-null object
dtypes: int64(1), object(2)
memory usage: 1.0+ MB
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The ratings dataframe contains the userId of the user giving the rating, the movieId of the movie being rated, the rating (ranges from 0.5 - 5 in increments of 0.5) and a timestamp of when the rating was given. There are over 26 million rows and no missing values.</p>
<p>The movies dataframe contains the movieId, title and a '|' delimited list of genres for each movie. There are over 45,000 rows and no missing values.</p>
<p>So far, so good. Let's look at the unique occurences of users and movies.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [7]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">n_users</span><span class="o">=</span><span class="p">(</span><span class="n">ratings</span><span class="o">.</span><span class="n">userId</span><span class="o">.</span><span class="n">nunique</span><span class="p">())</span> <span class="c1"># number of unique reviewers</span>
<span class="n">n_movies</span><span class="o">=</span><span class="p">(</span><span class="n">ratings</span><span class="o">.</span><span class="n">movieId</span><span class="o">.</span><span class="n">nunique</span><span class="p">())</span> <span class="c1"># number of unique movies</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'There are '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">n_users</span><span class="p">)</span> <span class="o">+</span> <span class="s1">' unique users.'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'There are '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">n_movies</span><span class="p">)</span> <span class="o">+</span> <span class="s1">' unique movies.'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>There are 270896 unique users.
There are 45115 unique movies.
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [8]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">max_userId</span> <span class="o">=</span> <span class="n">ratings</span><span class="o">.</span><span class="n">userId</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="c1"># maximum value of userID</span>
<span class="n">max_movieId</span> <span class="o">=</span> <span class="n">ratings</span><span class="o">.</span><span class="n">movieId</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="c1"># maximum value of movieId</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'Max userID is '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">max_userId</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'Max movieID is '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">max_movieId</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Max userID is 270896
Max movieID is 176275
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that the number of unique movies rated is less than the total number of movies with Id's, and also the maximum movie Id is much higher than the number of unique movies. This means that the movieId's are not consecutive numbers, and there are some movies without any ratings.</p>
<p>Let's see how the ratings are distributed.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [9]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">font_scale</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">'whitegrid'</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">ratings</span><span class="p">[</span><span class="s1">'rating'</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Occurrence counts of different unique ratings'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.05</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
HntGCCH/myhZ1UJqaioAoG3bthLlurq63DJCCCGKI2CMsfruxL/NuXPnsHz5ciQmJkqUu7i4wMDA
AOvXr69y3fj4eGV3jxBCas3Kyqq+uyAVPW6pFho3bgyxWIySkhI0avTfTVhUVIQmTZpUuy5fdwRC
COEzOg1YC/r6+gCAt2/fSpSnp6dXOjVICCHk01GyqgVjY2NoaWnhzp07XNnr16/x5s0b2NjY1GPP
CCHkfxOdBqwFdXV1TJkyBVu2bEGrVq3QunVrfPvtt7C1tYWFhUV9d48QQv7n0ASLWiopKcG2bdsQ
ERGBkpIS9O/fH6tXr4a2tnZ9d40QQv7nULIihBDCe3TNiifkfdagp6cnjIyMJP65urrWOv7q1aux
cuXKaus8ePAAkydPRs+ePTFs2DCcPXu21vHkiauIsWZkZGDZsmXo168frK2tMWPGDCQlJVVZPzo6
GmPHjoW5uTkcHBwQFRUlV7zaxp0wYUKlsda0faRJTU2Fp6cnbG1tYW1tjYULFyItLa3K+ooYr7wx
FTXWj/3+++8wMTFBTExMlXUUvR/LElNR79enT59WasfIyKjKhxEo4z1bbxjhhZ07d7LPP/+cRUdH
s4cPH7KvvvqKTZ48ucr6I0aMYAcPHmTp6encv+zsbLnjisVi9t133zGhUMhWrFhRZb3MzExma2vL
/Pz82LNnz1hwcDAzMTFhN27ckDumPHEZ+/SxlpaWskmTJrGJEyeye/fusadPnzJPT0/Wp08flpWV
Van+06dPmZmZGdu3bx979uwZ27lzJzM1NWVJSUlyjVHeuGKxmFlYWLDz589LjDUnJ0euuGKxmDk4
OLBp06axxMRElpiYyJycnNi4ceOk1lfEeOWNqaixfiw3N5fZ29szoVDIbt++LbWOovdjWWIyprj3
a2RkJOvVq5dEO+np6ayoqKhSXUWPtb5RsuKBwsJCZmlpyc6cOcOVJScnM6FQyOLj46XWNzExYb/9
9tsnxX316hVzdnZmvXr1YgMHDqw2aRw4cIANHjyYlZaWcmXLly9nbm5uSo2riLE+evSICYVC9uzZ
M4l2e/bsySIiIirV9/X1Zc7OzhJlzs7ObNWqVUqN+/LlSyYUCtmrV6/kilNReno68/b2ZsnJyVzZ
L7/8woRCodQPSEWMV96Yihrrx8rHUV3iUOR+LGtMRb1fGSv7Uuvk5CRTXUWPtb7RaUAekPdZg3/9
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
hoW7aQAAAABJRU5ErkJggg==
" />
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that 4 stars is the most common review score with close to 7m occurrences and 1.5 stars is the least common with 400k occurrences. Interestingly the .5 star intervals have lower frequencies than the integer star values. This could be because users are used to systems that only allow whole star ratings (e.g. Amazon).</p>
<p>Let's take a look at the ratings by movie and by genre.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [10]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#This splits the delimited genre string into a list of genres</span>
<span class="n">movies</span><span class="p">[</span><span class="s1">'genre_split'</span><span class="p">]</span> <span class="o">=</span> <span class="n">movies</span><span class="p">[</span><span class="s1">'genres'</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'|'</span><span class="p">))</span>
<span class="n">movies</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[10]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>movieId</th>
<th>title</th>
<th>genres</th>
<th>genre_split</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>1</td>
<td>Toy Story (1995)</td>
<td>Adventure|Animation|Children|Comedy|Fantasy</td>
<td>[Adventure, Animation, Children, Comedy, Fantasy]</td>
</tr>
<tr>
<th>1</th>
<td>2</td>
<td>Jumanji (1995)</td>
<td>Adventure|Children|Fantasy</td>
<td>[Adventure, Children, Fantasy]</td>
</tr>
<tr>
<th>2</th>
<td>3</td>
<td>Grumpier Old Men (1995)</td>
<td>Comedy|Romance</td>
<td>[Comedy, Romance]</td>
</tr>
<tr>
<th>3</th>
<td>4</td>
<td>Waiting to Exhale (1995)</td>
<td>Comedy|Drama|Romance</td>
<td>[Comedy, Drama, Romance]</td>
</tr>
<tr>
<th>4</th>
<td>5</td>
<td>Father of the Bride Part II (1995)</td>
<td>Comedy</td>
<td>[Comedy]</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [11]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># create a list containing each list of genres</span>
<span class="n">genres</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">movies</span><span class="p">[</span><span class="s1">'genre_split'</span><span class="p">])</span>
<span class="c1"># flatten the list of lists into a single list with duplicates</span>
<span class="n">genres</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">items</span> <span class="ow">in</span> <span class="n">genres</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>
<span class="c1"># convert to set to remove duplicates, then back to list</span>
<span class="n">genres</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">genres</span><span class="p">))</span>
<span class="c1">#sort into alphabetical order</span>
<span class="n">genres</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="n">genres</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[11]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>['(no genres listed)',
 'Action',
 'Adventure',
 'Animation',
 'Children',
 'Comedy',
 'Crime',
 'Documentary',
 'Drama',
 'Fantasy',
 'Film-Noir',
 'Horror',
 'IMAX',
 'Musical',
 'Mystery',
 'Romance',
 'Sci-Fi',
 'Thriller',
 'War',
 'Western']</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To explore the genres individually, we would like to create a new column for each genre. On a particular row if the movie was labeled with a genre then the genres column will have a 1, otherwise it will have a zero.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [12]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># add the new columns and initially fill with zeros</span>
<span class="k">for</span> <span class="n">genre</span> <span class="ow">in</span> <span class="n">genres</span><span class="p">:</span>
    <span class="n">movies</span><span class="p">[</span><span class="n">genre</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">movies</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[12]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>movieId</th>
<th>title</th>
<th>genres</th>
<th>genre_split</th>
<th>(no genres listed)</th>
<th>Action</th>
<th>Adventure</th>
<th>Animation</th>
<th>Children</th>
<th>Comedy</th>
<th>...</th>
<th>Film-Noir</th>
<th>Horror</th>
<th>IMAX</th>
<th>Musical</th>
<th>Mystery</th>
<th>Romance</th>
<th>Sci-Fi</th>
<th>Thriller</th>
<th>War</th>
<th>Western</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>1</td>
<td>Toy Story (1995)</td>
<td>Adventure|Animation|Children|Comedy|Fantasy</td>
<td>[Adventure, Animation, Children, Comedy, Fantasy]</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<th>1</th>
<td>2</td>
<td>Jumanji (1995)</td>
<td>Adventure|Children|Fantasy</td>
<td>[Adventure, Children, Fantasy]</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<th>2</th>
<td>3</td>
<td>Grumpier Old Men (1995)</td>
<td>Comedy|Romance</td>
<td>[Comedy, Romance]</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<th>3</th>
<td>4</td>
<td>Waiting to Exhale (1995)</td>
<td>Comedy|Drama|Romance</td>
<td>[Comedy, Drama, Romance]</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<th>4</th>
<td>5</td>
<td>Father of the Bride Part II (1995)</td>
<td>Comedy</td>
<td>[Comedy]</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>5 rows × 24 columns</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [13]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">genre_1hot</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    
    <span class="c1"># take the split genre list from each row</span>
    <span class="n">genre_list</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">'genre_split'</span><span class="p">]</span>
    
    <span class="c1"># for each genre that is in the list, make the respective column of the row equal to 1</span>
    <span class="k">for</span> <span class="n">genre</span> <span class="ow">in</span> <span class="n">genre_list</span><span class="p">:</span>
        <span class="n">row</span><span class="p">[</span><span class="n">genre</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    
    <span class="k">return</span> <span class="n">row</span>

<span class="c1"># apply to all rows, axis=1 passes the entire row into the function</span>
<span class="n">movies</span> <span class="o">=</span> <span class="n">movies</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">genre_1hot</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">movies</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[13]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>movieId</th>
<th>title</th>
<th>genres</th>
<th>genre_split</th>
<th>(no genres listed)</th>
<th>Action</th>
<th>Adventure</th>
<th>Animation</th>
<th>Children</th>
<th>Comedy</th>
<th>...</th>
<th>Film-Noir</th>
<th>Horror</th>
<th>IMAX</th>
<th>Musical</th>
<th>Mystery</th>
<th>Romance</th>
<th>Sci-Fi</th>
<th>Thriller</th>
<th>War</th>
<th>Western</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>1</td>
<td>Toy Story (1995)</td>
<td>Adventure|Animation|Children|Comedy|Fantasy</td>
<td>[Adventure, Animation, Children, Comedy, Fantasy]</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<th>1</th>
<td>2</td>
<td>Jumanji (1995)</td>
<td>Adventure|Children|Fantasy</td>
<td>[Adventure, Children, Fantasy]</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<th>2</th>
<td>3</td>
<td>Grumpier Old Men (1995)</td>
<td>Comedy|Romance</td>
<td>[Comedy, Romance]</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<th>3</th>
<td>4</td>
<td>Waiting to Exhale (1995)</td>
<td>Comedy|Drama|Romance</td>
<td>[Comedy, Drama, Romance]</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<th>4</th>
<td>5</td>
<td>Father of the Bride Part II (1995)</td>
<td>Comedy</td>
<td>[Comedy]</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>5 rows × 24 columns</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [14]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># genres and genre_split no longer required</span>
<span class="n">movies</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">'genres'</span><span class="p">,</span><span class="s1">'genre_split'</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [15]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># create a new column called year</span>
<span class="c1"># set it equal to the year extracted by the lambda function</span>
<span class="c1"># works by finding the last open bracket in the title and then </span>
<span class="c1"># grabbing all but the last character after it (so we don't grab the close bracket)</span>
<span class="n">movies</span><span class="p">[</span><span class="s1">'year'</span><span class="p">]</span> <span class="o">=</span> <span class="n">movies</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'('</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [16]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># reordering the columns so that year is next to title instead of at the end</span>
<span class="n">cols</span> <span class="o">=</span> <span class="n">movies</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">cols</span> <span class="o">=</span> <span class="n">cols</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">cols</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="o">+</span> <span class="n">cols</span> <span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">movies</span> <span class="o">=</span> <span class="n">movies</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span>
<span class="n">movies</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[16]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>movieId</th>
<th>title</th>
<th>year</th>
<th>(no genres listed)</th>
<th>Action</th>
<th>Adventure</th>
<th>Animation</th>
<th>Children</th>
<th>Comedy</th>
<th>Crime</th>
<th>...</th>
<th>Film-Noir</th>
<th>Horror</th>
<th>IMAX</th>
<th>Musical</th>
<th>Mystery</th>
<th>Romance</th>
<th>Sci-Fi</th>
<th>Thriller</th>
<th>War</th>
<th>Western</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>1</td>
<td>Toy Story (1995)</td>
<td>1995</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<th>1</th>
<td>2</td>
<td>Jumanji (1995)</td>
<td>1995</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<th>2</th>
<td>3</td>
<td>Grumpier Old Men (1995)</td>
<td>1995</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<th>3</th>
<td>4</td>
<td>Waiting to Exhale (1995)</td>
<td>1995</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<th>4</th>
<td>5</td>
<td>Father of the Bride Part II (1995)</td>
<td>1995</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>5 rows × 23 columns</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [17]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># create aggregated table of movies with their average ratings</span>
<span class="n">avg_ratings</span> <span class="o">=</span> <span class="n">ratings</span><span class="p">[[</span><span class="s1">'movieId'</span><span class="p">,</span><span class="s1">'rating'</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">'movieId'</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="c1"># add a column that shows how many ratings each movie got</span>
<span class="n">avg_ratings</span><span class="p">[</span><span class="s1">'movie_count'</span><span class="p">]</span> <span class="o">=</span> <span class="n">ratings</span><span class="p">[[</span><span class="s1">'movieId'</span><span class="p">,</span><span class="s1">'rating'</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">'movieId'</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()[</span><span class="s1">'rating'</span><span class="p">]</span>
<span class="n">avg_ratings</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[17]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>movieId</th>
<th>rating</th>
<th>movie_count</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>1</td>
<td>3.888157</td>
<td>66008</td>
</tr>
<tr>
<th>1</th>
<td>2</td>
<td>3.236953</td>
<td>26060</td>
</tr>
<tr>
<th>2</th>
<td>3</td>
<td>3.175550</td>
<td>15497</td>
</tr>
<tr>
<th>3</th>
<td>4</td>
<td>2.875713</td>
<td>2981</td>
</tr>
<tr>
<th>4</th>
<td>5</td>
<td>3.079565</td>
<td>15258</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Let's see what some of the best and worst rated movies are:</strong></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [18]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># merge with movies dataframe so that we get the movie title for each movieId</span>
<span class="n">avg_ratings</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">avg_ratings</span><span class="p">,</span> <span class="n">movies</span><span class="p">[[</span><span class="s1">'movieId'</span><span class="p">,</span><span class="s1">'title'</span><span class="p">]],</span> <span class="n">how</span><span class="o">=</span><span class="s1">'left'</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">'movieId'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'5 Best rated movies are: </span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">avg_ratings</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">'rating'</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'5 Worst rated movies are: </span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">avg_ratings</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">'rating'</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>5 Best rated movies are: 

       movieId  rating  movie_count                           title
34799   147966     5.0            1  Tarzan's Fight for Life (1958)
37018   154341     5.0            1                    Twist (1992)
40487   164620     5.0            1            Zig Zag Story (1983)
41457   167134     5.0            1           Thread of Lies (2014)
28386   129223     5.0            1     Tarzan's Savage Fury (1952)
5 Worst rated movies are: 

       movieId  rating  movie_count                            title
29904   133871     0.5            1         Woman Times Seven (1967)
44626   174947     0.5            1               Edith Walks (2017)
29880   133810     0.5            1                   The Mad (2007)
37649   156154     0.5            1                The Rescue (1971)
43044   171217     0.5            1  They Call Me Macho Woman (1991)
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>All of the top 5 and bottom 5 movies have only had 1 review each, so the average isn't a fair representation. What happens if we limit the above ranking to movies that have at least 50 reviews?</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [19]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">'5 Best rated movies are: </span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">avg_ratings</span><span class="p">[</span><span class="n">avg_ratings</span><span class="p">[</span><span class="s1">'movie_count'</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">50</span><span class="p">][[</span><span class="s1">'title'</span><span class="p">,</span><span class="s1">'rating'</span><span class="p">,</span><span class="s1">'movie_count'</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">'rating'</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'5 Worst rated movies are: </span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">avg_ratings</span><span class="p">[</span><span class="n">avg_ratings</span><span class="p">[</span><span class="s1">'movie_count'</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">50</span><span class="p">][[</span><span class="s1">'title'</span><span class="p">,</span><span class="s1">'rating'</span><span class="p">,</span><span class="s1">'movie_count'</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">'rating'</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>5 Best rated movies are: 

                                  title    rating  movie_count
38868               Planet Earth (2006)  4.478780          754
315    Shawshank Redemption, The (1994)  4.429015        91082
42834           Band of Brothers (2001)  4.394366          284
42965            Planet Earth II (2016)  4.352632           95
843               Godfather, The (1972)  4.339811        57070

5 Worst rated movies are: 

                                                   title    rating  \
6478                                        Gigli (2003)  1.185678   
4680                                      Glitter (2001)  1.141096   
33900  Barbie &amp; Her Sisters in the Great Puppy Advent...  1.000000   
6374                         From Justin to Kelly (2003)  0.995690   
8176                 SuperBabies: Baby Geniuses 2 (2004)  0.880342   

       movie_count  
6478           789  
4680           730  
33900           66  
6374           464  
8176           234  
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>These seem like quite reasonable choices, looking at other sources like IMDb and Rotten Tomatoes we can see that Planet Earth has a 9.4/10 average rating and SuperBabies: Baby Geniuses 2 (wow that sounds awful just reading the name) has an average rating of 2.0/10.</p>
<p><strong>Which genres have the highest average rating? </strong></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [20]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># add the average rating and rating count to the movies dataframe</span>
<span class="n">movies</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">movies</span><span class="p">,</span> <span class="n">avg_ratings</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">'title'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">how</span><span class="o">=</span><span class="s1">'left'</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">'movieId'</span><span class="p">)</span>
<span class="n">movies</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[20]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>movieId</th>
<th>title</th>
<th>year</th>
<th>(no genres listed)</th>
<th>Action</th>
<th>Adventure</th>
<th>Animation</th>
<th>Children</th>
<th>Comedy</th>
<th>Crime</th>
<th>...</th>
<th>IMAX</th>
<th>Musical</th>
<th>Mystery</th>
<th>Romance</th>
<th>Sci-Fi</th>
<th>Thriller</th>
<th>War</th>
<th>Western</th>
<th>rating</th>
<th>movie_count</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>1</td>
<td>Toy Story (1995)</td>
<td>1995</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>3.888157</td>
<td>66008.0</td>
</tr>
<tr>
<th>1</th>
<td>2</td>
<td>Jumanji (1995)</td>
<td>1995</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>3.236953</td>
<td>26060.0</td>
</tr>
<tr>
<th>2</th>
<td>3</td>
<td>Grumpier Old Men (1995)</td>
<td>1995</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>3.175550</td>
<td>15497.0</td>
</tr>
<tr>
<th>3</th>
<td>4</td>
<td>Waiting to Exhale (1995)</td>
<td>1995</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>2.875713</td>
<td>2981.0</td>
</tr>
<tr>
<th>4</th>
<td>5</td>
<td>Father of the Bride Part II (1995)</td>
<td>1995</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>3.079565</td>
<td>15258.0</td>
</tr>
</tbody>
</table>
<p>5 rows × 25 columns</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [21]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># rename the 'no genres' column because it contains brackets</span>
<span class="n">movies</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">'(no genres listed)'</span><span class="p">:</span><span class="s1">'No genre'</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># also rename the first element of our list of genres</span>
<span class="n">genres</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'No genre'</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [22]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># empty dict to store averages in</span>
<span class="n">genre_averages</span> <span class="o">=</span><span class="p">{}</span>

<span class="k">for</span> <span class="n">genre</span> <span class="ow">in</span> <span class="n">genres</span><span class="p">:</span>
    <span class="c1"># create a temporary matrix for each genre that has 2 rows</span>
    <span class="c1"># when the genre is 1, and when it is 0, calculating the mean for each</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">movies</span><span class="p">[[</span><span class="n">genre</span><span class="p">,</span><span class="s1">'rating'</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">genre</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="c1"># add the value for when the genre is 1 to the dictionary</span>
    <span class="n">genre_averages</span><span class="p">[</span><span class="n">genre</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">temp</span><span class="p">[</span><span class="n">genre</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">][</span><span class="s1">'rating'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    
<span class="n">genre_averages</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[22]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>{'Action': 2.907480986835453,
 'Adventure': 3.0053797907375595,
 'Animation': 3.1019211501623603,
 'Children': 2.9941692120856218,
 'Comedy': 3.0459564242081418,
 'Crime': 3.0849887476955757,
 'Documentary': 3.4018779251995923,
 'Drama': 3.1854970785716814,
 'Fantasy': 3.0112445862529977,
 'Film-Noir': 3.2749608942111896,
 'Horror': 2.5699016101754406,
 'IMAX': 3.2710571488102795,
 'Musical': 3.1806373483818486,
 'Mystery': 3.0460059300808058,
 'No genre': 2.9829671076426223,
 'Romance': 3.1554192365015243,
 'Sci-Fi': 2.7705485885884156,
 'Thriller': 2.9160945538643812,
 'War': 3.2292472013492275,
 'Western': 3.0269979078824996}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [23]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">genre_averages</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="n">y</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">genre_averages</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Average rating for each genre'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Average rating'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">genre_averages</span><span class="o">.</span><span class="n">values</span><span class="p">())),</span> <span class="n">label</span><span class="o">=</span><span class="s1">'Median = '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">genre_averages</span><span class="o">.</span><span class="n">values</span><span class="p">())),</span><span class="mi">2</span><span class="p">)))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="p">(</span><span class="mf">1.02</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[23]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.legend.Legend at 0x2718df31048&gt;</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
" />
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see from the above plot that the median average genre rating is 3.05. Documentaries have the highest average ratings (3.4) and Horror movies have by far the lowest average ratings (2.6).</p>
<p>It is worth noting that each movie is weighted the same in this calculation, so a movie with 1 review has the same weight as a movie with 10,000 reviews. Also many movies have multiple genres and are included in the calculation for each.</p>
<p><strong>Which movie has the most polarising effect on the audience (has the biggest spread of review scores)?</strong></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [24]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># groupby movieId again but this time calculate the standard deviations</span>
<span class="n">deviations</span> <span class="o">=</span> <span class="n">ratings</span><span class="p">[[</span><span class="s1">'movieId'</span><span class="p">,</span><span class="s1">'rating'</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">'movieId'</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
<span class="n">deviations</span><span class="p">[</span><span class="s1">'movie_count'</span><span class="p">]</span> <span class="o">=</span> <span class="n">ratings</span><span class="p">[[</span><span class="s1">'movieId'</span><span class="p">,</span><span class="s1">'rating'</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">'movieId'</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()[</span><span class="s1">'rating'</span><span class="p">]</span>
<span class="n">deviations</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">'rating'</span><span class="p">:</span><span class="s1">'std'</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">deviations</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">'std'</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># again limit to movies with at least 50 ratings</span>
<span class="n">deviations</span><span class="p">[</span><span class="n">deviations</span><span class="p">[</span><span class="s1">'movie_count'</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">50</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[24]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>std</th>
<th>movie_count</th>
</tr>
<tr>
<th>movieId</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>1311</th>
<td>1.744143</td>
<td>165</td>
</tr>
<tr>
<th>74754</th>
<td>1.727892</td>
<td>384</td>
</tr>
<tr>
<th>89281</th>
<td>1.645239</td>
<td>73</td>
</tr>
<tr>
<th>843</th>
<td>1.623914</td>
<td>63</td>
</tr>
<tr>
<th>110603</th>
<td>1.616805</td>
<td>117</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [25]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># take the movieId of the movie with the highest standard deviation</span>
<span class="n">largest_std</span> <span class="o">=</span> <span class="n">deviations</span><span class="p">[</span><span class="n">deviations</span><span class="p">[</span><span class="s1">'movie_count'</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">50</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
<span class="nb">print</span><span class="p">(</span><span class="n">movies</span><span class="p">[</span><span class="n">movies</span><span class="p">[</span><span class="s1">'movieId'</span><span class="p">]</span><span class="o">==</span><span class="n">largest_std</span><span class="p">][</span><span class="s1">'title'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">' has:'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'Average rating of '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">avg_ratings</span><span class="p">[</span><span class="n">avg_ratings</span><span class="p">[</span><span class="s1">'movieId'</span><span class="p">]</span><span class="o">==</span><span class="n">largest_std</span><span class="p">][</span><span class="s1">'rating'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'Deviation of '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">deviations</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">largest_std</span><span class="p">][</span><span class="s1">'std'</span><span class="p">]))</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Santa with Muscles (1996) has:
Average rating of 2.56060606061
Deviation of 1.7441434046
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Interestingly this movie has an average rating pretty much in the middle of the scale and the standard deviation that is equal to a large proportion of the distance from the mean to the maximum and minimum possible scores. Let's take a closer look at the distribution.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [26]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">ratings</span><span class="p">[</span><span class="n">ratings</span><span class="p">[</span><span class="s1">'movieId'</span><span class="p">]</span> <span class="o">==</span> <span class="n">largest_std</span><span class="p">][</span><span class="s1">'rating'</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Rating distribution for "Santa with Muscles (1996)"'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.05</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[26]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>Text(0.5,1.05,'Rating distribution for "Santa with Muscles (1996)"')</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
oNjX7e3tYW9vr7yAiIhIsviAWSIikiwmKSIikiwmKSIikiylX5MiIiLgceBllbRbZ5K5Str9UDyT
IiIiyWKSIiIiyWKSIiIiyWKSIiIiyWKSIiIiyWKSIiIiyWKSIiIiyWKSIiIiyWKSIiIiyWKSIiIi
yWKSIiIiyWKSIiIiyWKSIiIiyWKSIiIiyWKSIiIiyWKSIiIiyWKSIiIiyVJZkvrjjz9gamqKmJgY
sez06dNwdnaGubk5nJycEB0drarwiIhIAlSSpDIzMzFlyhTk5+eLZcnJyfDy8kLPnj0RERGBrl27
wsfHB0lJSaoIkYiIJEAlSWrhwoWoU6eOXFlISAjatGkDLy8vGBkZYeLEibCwsEBISIgqQiQiIglQ
epKKjo7GiRMnMGvWLLnyuLg42NjYyJXZ2toiLi5OmeEREZGEaCizsfT0dMycORMLFixAjRo15F5L
SUkpdHZlYGCAlJQUhdcfHx9fLnFWFE0VtSv1fiH6FDVQ0R7h37Y/UGqS+vHHH+Hg4AA7O7tCyScr
KwtaWlpyZVpaWsjOzlZ4/VZWVuUSZ0W5fEE17Uq9X4g+RY9PXlZJu+/vD6SetJSWpCIiInD9+nXs
37+/yNe1tbWRm5srV5aTkwMdHR1lhEdERBJUbknq8ePHhYbr3rVnzx48fvwYnTp1AgAIggAAGD16
NPr164d69eohNTVVbpnU1NQS10lERP9tCiepFi1aYOfOnTA3Ny/0WlxcHEaPHo1Lly4Vu/wvv/yC
rKws8e8nT57Azc0N8+bNQ8eOHbFs2TLExsbKLRMTEwNra2tFQyQiov+YEpPUpk2bkJmZCeDtmc/u
3btx8uTJQvUuXbpU6HrS+94/I9LW1hbLa9WqBXd3d7i4uGDFihXo3bs3Dhw4gISEBMyZM6cs74eI
iP5DSkxSeXl5WLNmDQBATU0Ne/bsKVRHXV0dn332GSZPnvxRgZiYmCAoKAhLlizBhg0b0KRJE6xd
uxZGRkYftV4iIvr3KjFJjRkzBmPGjAEANG/eHNu3by9yuO9D1K1bF7du3ZIrs7e3h729fbmsn4iI
/v0UviZ18+bNioyDiIiokDLN7jt//jxOnDiBzMxMcXaejJqaGvz9/cs1OCIi+rQpnKQ2b96MRYsW
QVtbG3p6elBTU5N7/f2/iYiIPpbCSSo0NBROTk6YP39+qTP5iIiIyoPCD5hNS0vDoEGDmKCIiEhp
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
+n+CfRVAMuPLewAAAABJRU5ErkJggg==
" />
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that the movie was very polarising among reviewers, with the vast majority of votes being either 1.0 or 5.0. This is a Christmas movie starring former Wrestler Hulk Hogan, so it's safe to assume that the movie is terrible and the 5.0 ratings are ironic/sarcastic ratings or there are a lot of Hulk Hogan fans that use MovieLens.</p>
<h2 id="2.-Building-the-recommender-system-">2. Building the recommender system <a class="anchor" id="second-bullet"></a><a class="anchor-link" href="#2.-Building-the-recommender-system-">¶</a></h2><p>There are a few different types of recommender system:</p>
<ul>
<li><strong>Popularity based</strong> : Simplest form of recommender system, will recommend that users watch the highest rated movies, because on average these have the highest probability of being liked. This works in some situations (for example <a href="https://www.youtube.com/feed/trending">YouTube Trending</a> simply recommends the most viewed/liked videos from a certain timeframe.</li>
</ul>
<ul>
<li><strong>Content based</strong> : This type looks at the features of a movie (e.g. the genres, the release year, actors, producer/director) to define a similarity metric between movies. It then looks at movies the user has rated highly and recommends the most similar movies. The drawbacks of this system are that detailed information is required about each movie and similar features do not necessarily guarantee a similar quality of movie (e.g. recommending 'Sinbad: Legend of the Seven Seas', a pretty bad cartoon movie, to someone who has given 'Fight Club' a high rating based on the fact that they both have Brad Pitt in would probably not result in a happy user). An example of this is Amazon's 'Products related to this item' section on a product page.</li>
</ul>
<ul>
<li><strong>Collaborative filtering</strong> : This type of recommender looks at the past ratings of users or movies to find users or movies that have a similar rating history. For 2 similar users, User A and User B, it can then recommend movies that User A liked but User B hasn't seen to User B, and vice-versa for User A. For 2 movies that have similar rating histories, Movie A and Movie B, if a user gives Movie A a high rating then the system will likely recommend Movie B to them. This results in very personalised recommendations. An example of this is Amazon's 'Customers who bought this item also bought' section on a product page. Collaborative filtering systems suffer from 'cold-start' issues, where a user has no history and so it is difficult to tell who similar users are.</li>
</ul>
<p>In reality, productionised recommendation systems use Hybrid combinations of the above types to provide an optimal experience for users, combining the strengths and eliminating the weaknesses of the 3 types.</p>
<p>We will be constructing a <strong>collaborative filtering</strong> system to recommend movies, as we don't have too many features for the movies and we can remove reviewers that reviewed less than a threshold number of movies to get rid of the cold-start problem.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Data-format">Data format<a class="anchor-link" href="#Data-format">¶</a></h3><p>To create a collaborative filtering system we need the data in a specific format. We want to create a matrix where a row relates to a specific user and a column relates to a specific movie. This will have shape (n_users, n_movies).</p>
<p>Then, by either looking at the similarity between rows or the similarity between columns we can implement a User based filtering system or a Movie based filtering system. The user similarity matrix will have shape (n_users, n_users) and the movie similarity matrix will have shape (n_movies, n_movies).</p>
<p>These matrices have very large dimensions for this dataset. In fact they will be far too large to fit into the memory of my laptop (16GB) for example the user similarity matrix would have shape (271k, 271k) and assuming 32bit floating numbers for each cell we would require around 294GB of RAM.</p>
<p>The rating matrix is fairly sparse and so can be stored in a more memory efficient datastructure, but the similarity matrices are completely non-sparse if all users and movies have ratings. For this reason I am significantly reducing the size of the data set for our recommendation system.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [27]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># only keeping the first 2M ratings due to memory restrictions</span>
<span class="n">ratings</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">'Movie Recommender/ratings.csv'</span><span class="p">)</span>
<span class="n">ratings</span> <span class="o">=</span> <span class="n">ratings</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">2000000</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [28]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># create a count of ratings per user</span>
<span class="n">user_rating_counts</span> <span class="o">=</span> <span class="n">ratings</span><span class="p">[[</span><span class="s1">'userId'</span><span class="p">,</span><span class="s1">'rating'</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">'userId'</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="n">user_rating_counts</span><span class="p">[</span><span class="s1">'user_counts'</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_rating_counts</span><span class="p">[</span><span class="s1">'rating'</span><span class="p">]</span>
<span class="n">user_rating_counts</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">'rating'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">user_rating_counts</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[28]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>userId</th>
<th>user_counts</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>1</td>
<td>27</td>
</tr>
<tr>
<th>1</th>
<td>2</td>
<td>22</td>
</tr>
<tr>
<th>2</th>
<td>3</td>
<td>10</td>
</tr>
<tr>
<th>3</th>
<td>4</td>
<td>62</td>
</tr>
<tr>
<th>4</th>
<td>5</td>
<td>26</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [29]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># create a count of ratings per movie</span>
<span class="n">movie_rating_counts</span> <span class="o">=</span> <span class="n">ratings</span><span class="p">[[</span><span class="s1">'movieId'</span><span class="p">,</span><span class="s1">'rating'</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">'movieId'</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="n">movie_rating_counts</span><span class="p">[</span><span class="s1">'movie_counts'</span><span class="p">]</span> <span class="o">=</span> <span class="n">movie_rating_counts</span><span class="p">[</span><span class="s1">'rating'</span><span class="p">]</span>
<span class="n">movie_rating_counts</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">'rating'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">movie_rating_counts</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[29]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>movieId</th>
<th>movie_counts</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>1</td>
<td>5125</td>
</tr>
<tr>
<th>1</th>
<td>2</td>
<td>1990</td>
</tr>
<tr>
<th>2</th>
<td>3</td>
<td>1153</td>
</tr>
<tr>
<th>3</th>
<td>4</td>
<td>198</td>
</tr>
<tr>
<th>4</th>
<td>5</td>
<td>1178</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [30]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#remove all movies with less than 50 ratings and users with less than 10 ratings</span>
<span class="n">ratings</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">ratings</span><span class="p">,</span> <span class="n">user_rating_counts</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">'left'</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span> <span class="s1">'userId'</span><span class="p">)</span>
<span class="n">ratings</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">ratings</span><span class="p">,</span> <span class="n">movie_rating_counts</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">'left'</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span> <span class="s1">'movieId'</span><span class="p">)</span>
<span class="n">ratings</span> <span class="o">=</span> <span class="n">ratings</span><span class="p">[(</span><span class="n">ratings</span><span class="p">[</span><span class="s1">'movie_counts'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">ratings</span><span class="p">[</span><span class="s1">'user_counts'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)]</span>
<span class="n">ratings</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[30]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>userId</th>
<th>movieId</th>
<th>rating</th>
<th>timestamp</th>
<th>user_counts</th>
<th>movie_counts</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>1</td>
<td>110</td>
<td>1.0</td>
<td>1425941529</td>
<td>27</td>
<td>5091</td>
</tr>
<tr>
<th>1</th>
<td>1</td>
<td>147</td>
<td>4.5</td>
<td>1425942435</td>
<td>27</td>
<td>402</td>
</tr>
<tr>
<th>2</th>
<td>1</td>
<td>858</td>
<td>5.0</td>
<td>1425941523</td>
<td>27</td>
<td>4459</td>
</tr>
<tr>
<th>3</th>
<td>1</td>
<td>1221</td>
<td>5.0</td>
<td>1425941546</td>
<td>27</td>
<td>2853</td>
</tr>
<tr>
<th>4</th>
<td>1</td>
<td>1246</td>
<td>5.0</td>
<td>1425941556</td>
<td>27</td>
<td>2006</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [31]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># need to create a hash table for userID and movieID because of gaps that waste memory</span>
<span class="kn">import</span> <span class="nn">collections</span>
<span class="c1"># userId hash table</span>
<span class="c1"># defaultdict is a structure that adds a key if it doesn't exist</span>
<span class="n">user_dict</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">()</span>

<span class="c1">#the userId's are the keys</span>
<span class="n">user_keys</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ratings</span><span class="p">[</span><span class="s1">'userId'</span><span class="p">]))</span>

<span class="n">user_index</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># each userId gets assigned a userIndex between 0 and n_users</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">user_keys</span><span class="p">:</span>
    <span class="n">user_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_index</span>
    <span class="n">user_index</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c1"># create a reversed dictionary incase we need to get back</span>
<span class="n">user_dict_rev</span> <span class="o">=</span> <span class="p">{</span><span class="n">v</span><span class="p">:</span> <span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">user_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

<span class="c1"># movieId hash table</span>
<span class="n">movie_dict</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">()</span>
<span class="n">movie_keys</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ratings</span><span class="p">[</span><span class="s1">'movieId'</span><span class="p">]))</span>

<span class="n">movie_index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">movie_keys</span><span class="p">:</span>
    <span class="n">movie_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">movie_index</span>
    <span class="n">movie_index</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c1"># create a reversed dictionary incase we need to get back</span>
<span class="n">movie_dict_rev</span> <span class="o">=</span> <span class="p">{</span><span class="n">v</span><span class="p">:</span> <span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">movie_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [32]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># create new columns in ratings dataframe</span>
<span class="n">ratings</span><span class="p">[</span><span class="s1">'movieIndex'</span><span class="p">]</span> <span class="o">=</span> <span class="n">ratings</span><span class="p">[</span><span class="s1">'movieId'</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">movie_dict</span><span class="p">)</span>
<span class="n">ratings</span><span class="p">[</span><span class="s1">'userIndex'</span><span class="p">]</span> <span class="o">=</span> <span class="n">ratings</span><span class="p">[</span><span class="s1">'userId'</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">user_dict</span><span class="p">)</span>
<span class="n">ratings</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[32]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>userId</th>
<th>movieId</th>
<th>rating</th>
<th>timestamp</th>
<th>user_counts</th>
<th>movie_counts</th>
<th>movieIndex</th>
<th>userIndex</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>1</td>
<td>110</td>
<td>1.0</td>
<td>1425941529</td>
<td>27</td>
<td>5091</td>
<td>106</td>
<td>0</td>
</tr>
<tr>
<th>1</th>
<td>1</td>
<td>147</td>
<td>4.5</td>
<td>1425942435</td>
<td>27</td>
<td>402</td>
<td>133</td>
<td>0</td>
</tr>
<tr>
<th>2</th>
<td>1</td>
<td>858</td>
<td>5.0</td>
<td>1425941523</td>
<td>27</td>
<td>4459</td>
<td>751</td>
<td>0</td>
</tr>
<tr>
<th>3</th>
<td>1</td>
<td>1221</td>
<td>5.0</td>
<td>1425941546</td>
<td>27</td>
<td>2853</td>
<td>1019</td>
<td>0</td>
</tr>
<tr>
<th>4</th>
<td>1</td>
<td>1246</td>
<td>5.0</td>
<td>1425941556</td>
<td>27</td>
<td>2006</td>
<td>1043</td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [33]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">n_users</span> <span class="o">=</span> <span class="n">ratings</span><span class="p">[</span><span class="s1">'userIndex'</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">n_movies</span> <span class="o">=</span> <span class="n">ratings</span><span class="p">[</span><span class="s1">'movieIndex'</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'There are now '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">n_users</span><span class="p">)</span> <span class="o">+</span> <span class="s1">' users.'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'There are now '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">n_movies</span><span class="p">)</span> <span class="o">+</span> <span class="s1">' movies.'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'The user-movie rating matrix is now '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">n_users</span><span class="o">*</span><span class="n">n_movies</span><span class="p">)</span> <span class="o">+</span> <span class="s1">' cells.'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'The user-user correlation matrix is now '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">n_users</span><span class="o">*</span><span class="n">n_users</span><span class="p">)</span> <span class="o">+</span> <span class="s1">' cells.'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>There are now 17352 users.
There are now 4632 movies.
The user-movie rating matrix is now 80374464 cells.
The user-user correlation matrix is now 301091904 cells.
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We need to split the data into a training and test set. We will build the recommender system on the training set and then use the test set to evaluate predictions. It is bad practice to evaluate a model on data used to build it.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [34]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># we need 2 matrices with shape (n_users, n_movies) to store the train and test data in</span>
<span class="n">train_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n_users</span><span class="p">,</span> <span class="n">n_movies</span><span class="p">))</span>
<span class="n">test_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n_users</span><span class="p">,</span> <span class="n">n_movies</span><span class="p">))</span>

<span class="c1"># now we need to randomly split the 'ratings' dataframe into training and testing data</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="k">import</span> <span class="n">train_test_split</span>

<span class="c1"># using a split of 90:10</span>
<span class="n">train_data</span><span class="p">,</span> <span class="n">test_data</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">ratings</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [35]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">train_data</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
    <span class="c1"># set the element at row 'userIndex' which is index 8, column 'movieIndex' which is index 7</span>
    <span class="c1"># to be equal to the 'rating' which is index 3</span>
    <span class="n">train_matrix</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="mi">7</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

<span class="c1"># similar process for the test data</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">test_data</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
    <span class="n">test_matrix</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="mi">7</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [36]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics.pairwise</span> <span class="k">import</span> <span class="n">cosine_similarity</span>

<span class="c1"># this creates the similarity between rows (users)</span>
<span class="n">user_similarities</span> <span class="o">=</span> <span class="n">cosine_similarity</span><span class="p">(</span><span class="n">train_matrix</span><span class="p">)</span>

<span class="c1"># this creates the similarity between columns (movies)</span>
<span class="n">movie_similarities</span> <span class="o">=</span> <span class="n">cosine_similarity</span><span class="p">(</span><span class="n">train_matrix</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's create a function that can get the most similar movies to a chosen movie. Note that cosine similarity varies from -1 (completely opposite) to 1 (exactly the same). Therefore we want to get the movies with the highest cosine similarities with a given movie.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [37]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">similar_movies</span><span class="p">(</span><span class="n">movie_title</span><span class="p">,</span> <span class="n">movies</span><span class="o">=</span><span class="n">movies</span><span class="p">,</span> <span class="n">movie_dict</span><span class="o">=</span><span class="n">movie_dict</span><span class="p">,</span> <span class="n">movie_similarities</span><span class="o">=</span><span class="n">movie_similarities</span><span class="p">,</span> <span class="n">movie_dict_rev</span><span class="o">=</span><span class="n">movie_dict_rev</span><span class="p">):</span>
    <span class="sd">'''Takes in a movie title (consistent with the titles in the movies dataframe) and returns the </span>
<span class="sd">    5 most similar movies, based purely upon similarity of rating history'''</span>
    
    <span class="c1"># get the movieId by looking up title in the movies dataframe</span>
    <span class="n">movieId</span> <span class="o">=</span> <span class="n">movies</span><span class="p">[</span><span class="n">movies</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span> <span class="o">==</span> <span class="n">movie_title</span><span class="p">][</span><span class="s1">'movieId'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># use movie_dict to get the movieIndex</span>
    <span class="n">movieIndex</span> <span class="o">=</span> <span class="n">movie_dict</span><span class="p">[</span><span class="n">movieId</span><span class="p">]</span>
    
    <span class="c1"># grab the corresponding row of the movie similarity matrix</span>
    <span class="n">movieVector</span> <span class="o">=</span> <span class="n">movie_similarities</span><span class="p">[</span><span class="n">movieIndex</span><span class="p">,</span> <span class="p">:]</span>
    
    <span class="c1"># argsort the row, so we know </span>
    <span class="n">movieVector_args</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">movieVector</span><span class="p">)</span>
    
    <span class="c1"># extract the indices of the 5 largest values</span>
    <span class="c1"># reverse it because the largest is at the end</span>
    <span class="n">indices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">movieVector_args</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]))</span>
    <span class="c1"># get the similarity value for each of the indices extracted</span>
    <span class="n">similarities</span><span class="o">=</span><span class="p">[</span><span class="n">movieVector</span><span class="p">[</span><span class="n">arg</span><span class="p">]</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">]</span>
    
    <span class="n">ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">movie_dict_rev</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">]</span>
    <span class="n">titles</span> <span class="o">=</span> <span class="p">[</span><span class="n">movies</span><span class="p">[</span><span class="n">movies</span><span class="p">[</span><span class="s1">'movieId'</span><span class="p">]</span> <span class="o">==</span> <span class="n">Id</span><span class="p">][</span><span class="s1">'title'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">Id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">]</span>
    
    <span class="k">for</span> <span class="n">title</span><span class="p">,</span> <span class="n">similarity</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">titles</span><span class="p">,</span> <span class="n">similarities</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">title</span> <span class="o">+</span> <span class="s1">' : '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">similarity</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [38]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">similar_movies</span><span class="p">(</span><span class="s1">'Star Wars: Episode V - The Empire Strikes Back (1980)'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Star Wars: Episode V - The Empire Strikes Back (1980) : 1.0
Star Wars: Episode IV - A New Hope (1977) : 0.710802762324
Star Wars: Episode VI - Return of the Jedi (1983) : 0.697117387319
Raiders of the Lost Ark (Indiana Jones and the Raiders of the Lost Ark) (1981) : 0.651978974751
Indiana Jones and the Last Crusade (1989) : 0.591202298253
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [39]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">similar_movies</span><span class="p">(</span><span class="s1">'Fight Club (1999)'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Fight Club (1999) : 1.0
Matrix, The (1999) : 0.590987863202
Memento (2000) : 0.562552065916
American Beauty (1999) : 0.548615358274
Lord of the Rings: The Fellowship of the Ring, The (2001) : 0.541258035677
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The first movie that is returned is always the query movie. This is because the angle between a vector and itself will always be zero, and the cosine of zero is 1. Then we get some other movies. Querying Star Wars Episode V returns Episodes IV and VI along with 2 Indiana Jones movies that were released around the same time. These 2 movie franchises have similar cult followings.</p>
<p>Querying Fight Club returns The Matrix, Memento, American Beauty and LOTR. These were all released around the same year and (except LOTR) all have strong psychological components to the plotline.</p>
<p>Without any details on the movies themselves, we have been able to identify movies that are similar in nature to a query movie and that are likely to be good recommendations to people that liked the query movie.</p>
<h3 id="Predicting-ratings-for-unseen-movies">Predicting ratings for unseen movies<a class="anchor-link" href="#Predicting-ratings-for-unseen-movies">¶</a></h3><p>The next step is to take a users history and an unseen movie and predict the users rating for that movie. There are 2 ways to predict a rating:</p>
<ol>
<li><strong>User Based</strong> - Look at how users similar to the query user rated the movie and calculate a weighted sum. Because different users will have different interpretations of what ratings are good or bad, the ratings must be normalized to show the difference between the users mean rating and the rating for the current movie.</li>
<li><strong>Movie Based</strong> - Look at how the user rated movies similar to the query movie and calculate a weighted sum. This does not require adjustment to the mean because only the current users ratings are used in the sum. </li>
</ol>
<p>For the User Based method, the predicted rating of user k for movie m is then:</p>
<p>\begin{equation*}
\hat{y}_{k,m} = \bar{y}_{k} + \frac{\sum{sim_{user}(user_{k}, user_{a})(y_{a,m} - \bar{y}_{a})}}{\sum{\lvert sim_{user}(user_{k}, user_{a})\rvert}}
\end{equation*}</p>
<p>For the Movie Based method, the predicted rating of user k for movie m is then:</p>
<p>\begin{equation*}
\hat{y}_{k,m} = \frac{\sum{sim_{movie}(movie_{m}, movie_{a})y_{k,a}}}{\sum{\lvert sim_{movie}(movie_{m}, movie_{a})\rvert}}
\end{equation*}</p>
<p>Care must be taken when making predictions, because our training matrix has zero's where a user did not rate a movie. If we use this matrix directly, these will be treated as actual ratings of zero and will pull our predictions towards zero artificially.</p>
<h3 id="Evaluation">Evaluation<a class="anchor-link" href="#Evaluation">¶</a></h3><p>A number of metrics could be used to compare the predicted ratings with the actual ratings held back in the test set. Two of the most commonly used metrics are Root Mean Squared Error (RMSE) and Mean Absolute Error (MAE). The equations for both are shown below:</p>
<p>\begin{equation*}
RMSE = \sqrt{\frac{1}{N}\sum_{i=1}^N(y_i - \hat{y}_i)^2}
\end{equation*}</p>
<p>\begin{equation*}
MAE = \frac{1}{N}\sum_{i=1}^N \lvert y_i - \hat{y}_i \rvert
\end{equation*}</p>
<p>Where $y$ is the actual rating and $\hat{y}$ is the predicted rating and N is the number of test points. MAE has the advantage that it is directly interpretable on the scale of the ratings, as it is simply the mean distance between the predicted ratings and the actual ratings.</p>
<p>For both the user-based and movie-based predictions we will calculate both quality metrics. I will walk through the prediction process for a single user and movie pair first.</p>
<p><strong>User based prediction for a single user-movie pair</strong></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [40]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># user 0 has entries in the following movieIndex's in the test matrix</span>
<span class="c1"># therefore we need to make predictions for these movies</span>
<span class="n">test_matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[40]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>(array([ 715, 1186, 1541, 4477], dtype=int64),)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [41]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># for movieIndex 715 we need to find all users that DID rate the movie in the training set</span>
<span class="c1"># we use the users with userIndex below to calculate our prediction</span>
<span class="n">train_matrix</span><span class="p">[:,</span><span class="mi">715</span><span class="p">]</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[41]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>(array([    4,    27,    30, ..., 17282, 17286, 17305], dtype=int64),)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [42]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># user similarities for current user with users found above</span>
<span class="n">sims</span><span class="o">=</span> <span class="n">user_similarities</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">train_matrix</span><span class="p">[:,</span><span class="mi">715</span><span class="p">]</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()]</span>
<span class="n">sims</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[42]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>array([[ 0.17906124,  0.12489677,  0.        , ...,  0.08038237,
         0.08282088,  0.09935196]])</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [43]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># average rating for each user, ignoring values that are zero</span>
<span class="n">mean_user_ratings</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">train_matrix</span><span class="o">!=</span><span class="mi">0</span><span class="p">,</span><span class="n">train_matrix</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span> <span class="n">keepdims</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">mean_user_ratings</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>C:\Users\phil_\Anaconda3\lib\site-packages\ipykernel_launcher.py:2: RuntimeWarning: Mean of empty slice
  
</pre>
</div>
</div>
<div class="output_area">
<div class="prompt output_prompt">Out[43]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>array([[ 4.15909091],
       [ 3.2       ],
       [ 3.60784314],
       ..., 
       [ 3.45454545],
       [ 3.1       ],
       [ 3.20052083]])</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [44]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mean_user_ratings</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[44]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>(17352, 1)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [45]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># the difference between users average ratings and their ratings for movieIndex 715</span>
<span class="n">diff</span> <span class="o">=</span> <span class="n">train_matrix</span><span class="p">[</span><span class="n">train_matrix</span><span class="p">[:,</span><span class="mi">715</span><span class="p">]</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(),</span> <span class="mi">715</span><span class="p">]</span> <span class="o">-</span> <span class="n">mean_user_ratings</span><span class="p">[</span><span class="n">train_matrix</span><span class="p">[:,</span><span class="mi">715</span><span class="p">]</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(),</span><span class="mi">0</span><span class="p">]</span>
<span class="n">diff</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[45]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>array([[-1.35555556,  0.82040816,  0.15625   , ..., -2.59550562,
         1.16825776,  1.28439597]])</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [46]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># now we calculate the dot product of the similarities with the rating difference above</span>
<span class="c1"># then divide by the sum of the similarities and add it all to userIndex 0's mean rating</span>
<span class="n">pred</span> <span class="o">=</span> <span class="n">mean_user_ratings</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">sims</span><span class="p">,</span> <span class="n">diff</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">sims</span><span class="p">)</span>
<span class="n">pred</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[46]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>array([[ 4.39883536]])</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [47]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># the actual rating</span>
<span class="n">test_matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">715</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[47]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>4.0</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Not bad! We predicted that the rating would be 4.4 and the actual rating was 4.0, just based on the rating that other users gave the movie and their similarity to the user with index 0.</p>
<p>Let's calculate a prediction using the movie similarity instead.</p>
<p><strong>Movie-based prediction for a single user-movie pair</strong></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [48]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># list of all the movieIndex's that user with index 0 actually rated</span>
<span class="n">train_matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[48]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>(array([ 106,  133,  470,  751,  878, 1013, 1019, 1043, 1156, 1538, 2148,
        2196, 2255, 2285, 3107, 3147, 3438, 3658, 3764, 3938, 4173, 4609], dtype=int64),)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [49]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># similarities of movie 715 with these movies</span>
<span class="n">movie_sims</span> <span class="o">=</span> <span class="n">movie_similarities</span><span class="p">[</span><span class="mi">715</span><span class="p">,</span> <span class="n">train_matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [50]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">movie_ratings</span> <span class="o">=</span> <span class="n">train_matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">train_matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [51]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># make prediction using dot product of movie_sims and the ratings user 0 gave them</span>
<span class="c1"># divided by the sum of the similarities</span>
<span class="n">movie_pred</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">movie_sims</span><span class="p">,</span> <span class="n">movie_ratings</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">movie_sims</span><span class="p">)</span>
<span class="n">movie_pred</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[51]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>array([[ 4.07189941]])</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Wow! The movie similarity prediction was 4.07 compared to the actual rating of 4.0. This is incredibly close considering it's purely based on the users ratings of other movies and the similarity of the rating history between those movies and movie 715.</p>
<p>The accuracy of a specific prediction will be dependent on how many ratings for the user/movie of interest we have in the dataset, so for some pairs one method might be better and for some pairs the other might be better.</p>
<p>Now we can write functions that will perform the above steps for every non-zero entry in the test matrix, and then we can evaluate the overall performance of both methods using our defined evaluation metrics.</p>
<p><strong>Predictions for the entire test matrix</strong></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [52]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">predict_users</span><span class="p">(</span><span class="n">train</span><span class="o">=</span><span class="n">train_matrix</span><span class="p">,</span> <span class="n">test</span><span class="o">=</span><span class="n">test_matrix</span><span class="p">,</span>  <span class="n">sims</span> <span class="o">=</span> <span class="n">user_similarities</span><span class="p">):</span>
    <span class="sd">'''Function that takes in the training matrix, testing matrix and the user similarity matrix</span>
<span class="sd">    and calculates predicted user ratings for each user/movie pair present in the test matrix.'''</span>
    <span class="c1"># create an empty output matrix the same size as test</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">test</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
    
    <span class="c1"># calculate the mean values for later use</span>
    <span class="n">mean_user_ratings</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">train</span><span class="o">!=</span><span class="mi">0</span><span class="p">,</span><span class="n">train</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span> <span class="n">keepdims</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">mean_movie_ratings</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">train</span><span class="o">!=</span><span class="mi">0</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">keepdims</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
    <span class="c1">#check every row of the test matrix for non-zero values</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">test</span><span class="p">)):</span>
        <span class="n">nonzero_test</span> <span class="o">=</span> <span class="n">test</span><span class="p">[</span><span class="n">i</span><span class="p">,:]</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()</span>
        
        <span class="c1">#if non-zero isn't empty, we need to do some calculations</span>
        <span class="k">if</span> <span class="nb">list</span><span class="p">(</span><span class="n">nonzero_test</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="c1">#first check that we have training data for that user</span>
            <span class="n">nonzero_train</span> <span class="o">=</span> <span class="n">train</span><span class="p">[</span><span class="n">i</span><span class="p">,:]</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()</span>
            <span class="c1"># if there is training data for that user then continue</span>
            <span class="k">if</span> <span class="nb">list</span><span class="p">(</span><span class="n">nonzero_train</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="p">[]:</span>
                <span class="c1">#loop over movie indices in the array</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">nonzero_test</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                    <span class="c1">#find the other users that rated the movie and the similarities of those users with the current user</span>
                    <span class="n">other_users</span> <span class="o">=</span> <span class="n">train</span><span class="p">[:,</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()</span>
                    <span class="n">user_sims</span><span class="o">=</span> <span class="n">sims</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">other_users</span><span class="p">]</span>

                    <span class="c1">#find the difference between the ratings for this movie and the average ratings</span>
                    <span class="n">diff</span> <span class="o">=</span> <span class="n">train</span><span class="p">[</span><span class="n">other_users</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="n">mean_user_ratings</span><span class="p">[</span><span class="n">other_users</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>

                    <span class="c1"># calculate prediction</span>
                    <span class="n">pred</span> <span class="o">=</span> <span class="n">mean_user_ratings</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">user_sims</span><span class="p">,</span> <span class="n">diff</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">user_sims</span><span class="p">)</span>

                    <span class="c1">#set value of output matrix equal to prediction</span>
                    <span class="n">output</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">pred</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#if there is no training data, then just return the average rating for each movie</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">nonzero_test</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                    <span class="n">pred</span> <span class="o">=</span> <span class="n">mean_movie_ratings</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">j</span><span class="p">]</span>
                    
                    <span class="n">output</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">pred</span>
                
    <span class="k">return</span> <span class="n">output</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [53]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">predict_movies</span><span class="p">(</span><span class="n">train</span><span class="o">=</span><span class="n">train_matrix</span><span class="p">,</span> <span class="n">test</span><span class="o">=</span><span class="n">test_matrix</span><span class="p">,</span>  <span class="n">sims</span> <span class="o">=</span> <span class="n">movie_similarities</span><span class="p">):</span>
    <span class="sd">'''Function that takes in the training matrix, testing matrix and the movie similarity matrix</span>
<span class="sd">    and calculates predicted user ratings for each user/movie pair present in the test matrix.'''</span>
    <span class="c1"># create an empty output matrix the same size as test</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">test</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
    
    <span class="c1"># calculate the mean values for later use</span>
    <span class="n">mean_movie_ratings</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">train</span><span class="o">!=</span><span class="mi">0</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">keepdims</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
    <span class="c1">#check every row of the test matrix for non-zero values</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">test</span><span class="p">)):</span>
        <span class="n">nonzero_test</span> <span class="o">=</span> <span class="n">test</span><span class="p">[</span><span class="n">i</span><span class="p">,:]</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()</span>
        
        <span class="c1">#if non-zero isn't empty, we need to do some calculations</span>
        <span class="k">if</span> <span class="nb">list</span><span class="p">(</span><span class="n">nonzero_test</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="c1">#first check that we have training data for that user</span>
            <span class="n">nonzero_train</span> <span class="o">=</span> <span class="n">train</span><span class="p">[</span><span class="n">i</span><span class="p">,:]</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()</span>
            <span class="c1"># if there is training data for that user then continue</span>
            <span class="k">if</span> <span class="nb">list</span><span class="p">(</span><span class="n">nonzero_train</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="p">[]:</span>
                <span class="c1">#loop over movie indices in the array</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">nonzero_test</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                    <span class="c1">#find the indices of other movies that the user rated</span>
                    <span class="n">other_ratings_indices</span> <span class="o">=</span> <span class="n">train</span><span class="p">[</span><span class="n">i</span><span class="p">,:]</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()</span>
                    <span class="c1">#find the similarities between the test movie and the other movies the user rated</span>
                    <span class="n">movie_sims</span><span class="o">=</span> <span class="n">sims</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">other_ratings_indices</span><span class="p">]</span>

                    <span class="c1">#find the actual ratings the user gave these movies</span>
                    <span class="n">other_ratings</span> <span class="o">=</span> <span class="n">train</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">other_ratings_indices</span><span class="p">]</span>

                    <span class="c1"># calculate prediction</span>
                    <span class="n">pred</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">movie_sims</span><span class="p">,</span> <span class="n">other_ratings</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">movie_sims</span><span class="p">)</span>

                    <span class="c1">#set value of output matrix equal to prediction</span>
                    <span class="n">output</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">pred</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#if there is no training data, then just return the average rating for each movie</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">nonzero_test</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                    <span class="n">pred</span> <span class="o">=</span> <span class="n">mean_movie_ratings</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">j</span><span class="p">]</span>
                    
                    <span class="n">output</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">pred</span>
                
    <span class="k">return</span> <span class="n">output</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [54]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">user_preds</span> <span class="o">=</span> <span class="n">predict_users</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>C:\Users\phil_\Anaconda3\lib\site-packages\ipykernel_launcher.py:8: RuntimeWarning: Mean of empty slice
  
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [55]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">movie_preds</span> <span class="o">=</span> <span class="n">predict_movies</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that the runtime warning above is caused by one user for whom all of the ratings were randomly assigned to the test matrix. This means that when we try to calculate the mean rating for that user, we get a NaN value. The functions above have tests to catch this error and the predictions for that user are simply the mean rating for each movie.</p>
<p><strong>Evaluation functions</strong></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [56]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">calc_RMSE</span><span class="p">(</span><span class="n">predictions</span><span class="p">,</span> <span class="n">actual_ratings</span><span class="p">):</span>
    
    <span class="c1"># only want to calculate on values that are non-zero in the test data</span>
    
    <span class="n">predictions</span> <span class="o">=</span> <span class="n">predictions</span><span class="p">[</span><span class="n">actual_ratings</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()]</span>
    <span class="n">actual_ratings</span> <span class="o">=</span> <span class="n">actual_ratings</span><span class="p">[</span><span class="n">actual_ratings</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()]</span>
    
    <span class="n">rmse</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">((</span><span class="n">predictions</span> <span class="o">-</span> <span class="n">actual_ratings</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
    
    <span class="k">return</span> <span class="n">rmse</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [57]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">'The RMSE for the user-based method is '</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">calc_RMSE</span><span class="p">(</span><span class="n">user_preds</span><span class="p">,</span> <span class="n">test_matrix</span><span class="p">),</span> <span class="mi">3</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'The RMSE for the movie-based method is '</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">calc_RMSE</span><span class="p">(</span><span class="n">movie_preds</span><span class="p">,</span> <span class="n">test_matrix</span><span class="p">),</span> <span class="mi">3</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>The RMSE for the user-based method is 0.865
The RMSE for the movie-based method is 0.92
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [58]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">calc_MAE</span><span class="p">(</span><span class="n">predictions</span><span class="p">,</span> <span class="n">actual_ratings</span><span class="p">):</span>
    
    <span class="c1"># only want to calculate on values that are non-zero in the test data</span>
    
    <span class="n">predictions</span> <span class="o">=</span> <span class="n">predictions</span><span class="p">[</span><span class="n">actual_ratings</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()]</span>
    <span class="n">actual_ratings</span> <span class="o">=</span> <span class="n">actual_ratings</span><span class="p">[</span><span class="n">actual_ratings</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()]</span>
    
    <span class="n">mae</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">predictions</span> <span class="o">-</span> <span class="n">actual_ratings</span><span class="p">))</span>
    
    <span class="k">return</span> <span class="n">mae</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [59]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">'The MAE for the user-based method is '</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">calc_MAE</span><span class="p">(</span><span class="n">user_preds</span><span class="p">,</span> <span class="n">test_matrix</span><span class="p">),</span> <span class="mi">3</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'The MAE for the movie-based method is '</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">calc_MAE</span><span class="p">(</span><span class="n">movie_preds</span><span class="p">,</span> <span class="n">test_matrix</span><span class="p">),</span> <span class="mi">3</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>The MAE for the user-based method is 0.66
The MAE for the movie-based method is 0.709
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>These seem like decent scores! The user-based method has the lowest overall error over the testing setm despite the movie-based method winning for the single example we walked through, which emphasises my point about the accuracy depending on the available data.</p>
<p>We can see that, on average, the user-based method predicts a score 0.66 away from the actual rating.</p>
<p><strong>But is this actually a good score?</strong></p>
<p>One way to test if this is a good score is to see how well a model that just predicts the average rating for every movie performs.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [60]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">predict_means</span><span class="p">(</span><span class="n">train</span><span class="o">=</span> <span class="n">train_matrix</span><span class="p">,</span> <span class="n">test</span> <span class="o">=</span> <span class="n">test_matrix</span><span class="p">):</span>
    <span class="sd">'''Takes in the train and test matrices and outputs a prediction matrix where every non-zero cell</span>
<span class="sd">    of the test matrix has the average score for that movie'''</span>
    
    <span class="c1"># create an empty output matrix the same size as test</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">test</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
    
    <span class="c1"># calculate the mean values for later use</span>
    <span class="n">mean_movie_ratings</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">train</span><span class="o">!=</span><span class="mi">0</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">keepdims</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
    <span class="c1">#check every row of the test matrix for non-zero values</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">test</span><span class="p">)):</span>
        <span class="n">nonzero_test</span> <span class="o">=</span> <span class="n">test</span><span class="p">[</span><span class="n">i</span><span class="p">,:]</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()</span>
        
        <span class="c1">#if non-zero isn't empty, we need to do some calculations</span>
        <span class="k">if</span> <span class="nb">list</span><span class="p">(</span><span class="n">nonzero_test</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="p">[]:</span>
            
            <span class="c1">#loop over movie indices in the array</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">nonzero_test</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                
                <span class="c1"># predict the mean value</span>
                <span class="n">pred</span> <span class="o">=</span> <span class="n">mean_movie_ratings</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>

                <span class="c1">#set value of output matrix equal to prediction</span>
                <span class="n">output</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">pred</span>
    
    <span class="k">return</span> <span class="n">output</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [61]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mean_preds</span> <span class="o">=</span> <span class="n">predict_means</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [62]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">'The RMSE for the mean method is '</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">calc_RMSE</span><span class="p">(</span><span class="n">mean_preds</span><span class="p">,</span> <span class="n">test_matrix</span><span class="p">),</span> <span class="mi">3</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'The MAE for the mean method is '</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">calc_MAE</span><span class="p">(</span><span class="n">mean_preds</span><span class="p">,</span> <span class="n">test_matrix</span><span class="p">),</span> <span class="mi">3</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>The RMSE for the mean method is 0.947
The MAE for the mean method is 0.733
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Both of our methods have lower error than the mean method, so we can say that our model would provide better recommendations to users.</p>
<p>It is worth noting that to actually provide recommendations to a user we would predict scores for movies they haven't seen and recommend the ones with the highest predicted scores.</p>
<h2 id="3.-Improvements/Further-Work-">3. Improvements/Further Work <a class="anchor" id="third-bullet"></a><a class="anchor-link" href="#3.-Improvements/Further-Work-">¶</a></h2><p>To summarise:</p>
<ul>
<li>We have implemented both user-based and item-based collaborative filtering using the MovieLens data set</li>
<li>A test set was held back for evaluation purposes</li>
<li>For each user/movie pair in the test set we used both methods to predict a rating </li>
<li>Comparing this rating with the actual rating we were able to compute RMSE and MAE scores for the model</li>
<li>Both models were more accurate than a baseline model that simply predicted the average score for each movie</li>
<li>The best case MAE was 0.66, meaning that on average the predictions were 0.66 away from the actual rating.</li>
</ul>
<p>There are a number of things that could improve the model.</p>
<ol>
<li><strong>More data</strong>: The quality of the predictions is dependent on the quality of the similarities calculated between users and items. Using a larger subsection of the data set should lead to reduced errors.</li>
<li><strong>Nearest Neighbours</strong>: Currently, the user-based method uses the rating of every other user that rated a particular movie. Whilst dissimilar users contributions are weighted to be small, there is still a contribution. We could instead take the weighted sum of only the N most similar users (or N most similar movies for the movie-based model). It would be interesting to implement this and see how the error varies with N.</li>
<li><strong>Capping/Rounding</strong>: The predictions that we have made could take on any continuous value above zero, whereas the rating scale for the original data was 0.5 to 5 in increments of 0.5. If we were to limit our predictions so anything below 0.5 is set to 0.5, anything above 5 is set to 5 and anything inbetween is rounded to the nearest 0.5 would this improve or degrade performance?</li>
<li><strong>Singular Value Decomposition (SVD)</strong>: Instead of using the cosine similarity metric, SVD can be used to 'learn' similarities between users and between features. This can then be used to build the prediction.</li>
<li><strong>Time weighting</strong>: The MovieLens dataset incorporates ratings from 1995 to 2017. As a movie gets older it is possible that for example the computer graphics used don't age well and users watching it now will perceive it to be worse. The ratings could be weighted by how recent they are, with more recent ratings counting for more.</li>
</ol>
<p>I intend to create another post exploring some of the above improvements with the same dataset, so we can see any benefits relative to this first implementation.</p>
<p>Thanks for reading!</p>
</div>
</div>
</div>

<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        " linebreaks: { automatic: true, width: '95% container' }, " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>

  </div>

<div class="article-tag-list">
<span class="label label-default">Tags</span>
	<a href="https://hexhamallstar.github.io/tag/python.html"><i class="fa fa-tag"></i>Python</a>&nbsp;
	<a href="https://hexhamallstar.github.io/tag/eda.html"><i class="fa fa-tag"></i>EDA</a>&nbsp;
	<a href="https://hexhamallstar.github.io/tag/recommender-system.html"><i class="fa fa-tag"></i>Recommender System</a>&nbsp;
	<a href="https://hexhamallstar.github.io/tag/movielens.html"><i class="fa fa-tag"></i>MovieLens</a>&nbsp;
	<a href="https://hexhamallstar.github.io/tag/collaborative-filtering.html"><i class="fa fa-tag"></i>Collaborative Filtering</a>&nbsp;
</div>  <hr />
  <div class="well well-sm">  <!-- Social media sharing buttons -->

    <!-- Google+ -->
    <div class="g-plus" data-action="share" data-annotation="bubble"></div>
    &nbsp;&nbsp;&nbsp;&nbsp;
    <div class="g-plusone" data-size="medium"></div>&nbsp;

    <!-- Facebook -->
    <div class="fb-like" 
        data-href="https://hexhamallstar.github.io/movie-rec.html" 
        data-layout="button_count" 
        data-action="like" data-show-faces="true" 
        data-share="true">
    </div>
    &nbsp;
  </div> <!-- /Social media sharing buttons -->
  <div class="comments">
	<h2>Comments</h2>
	<div id="disqus_thread"></div>
	<script type="text/javascript">
				   (function() {
						var dsq = document.createElement('script');
						dsq.type = 'text/javascript'; dsq.async = true;
						dsq.src = '//hexhamallstar-github-io.disqus.com/embed.js';
						(document.getElementsByTagName('head')[0] ||
						 document.getElementsByTagName('body')[0]).appendChild(dsq);
				  })();
	</script>
  </div>
</article>
        </div><!-- /content -->

        <div class="col-md-3 sidebar-nav" id="sidebar">

<div class="row">

<div class="col-xs-6 col-md-12">
<h4><i class="fa fa-comment fa-fw fa-lg"></i> Social</h4>
<ul class="list-unstyled social-links">
    <li><a href="http://www.linkedin.com/in/philbingham45/" target="_blank">
	  <i class="fa fa-linkedin-square fa-fw fa-lg" title="LinkedIn"></i>
		LinkedIn
	</a></li>
    <li><a href="http://github.com/hexhamallstar" target="_blank">
	  <i class="fa fa-github-square fa-fw fa-lg" title="GitHub"></i>
		GitHub
	</a></li>
</ul>
</div>

<div class="col-xs-6 col-md-12">
<h4><i class="fa fa-folder fa-fw fa-lg"></i> Categories</h4>
<ul class="list-unstyled category-links">
  <li><a href="https://hexhamallstar.github.io/category/notebooks.html" >
    <i class="fa fa-folder-open fa-fw fa-lg"></i> Notebooks</a></li>
</ul>
</div>

</div> <!-- /row -->

  <h4><i class="fa fa-link fa-fw fa-lg"></i> Links</h4>
  <ul class="list-unstyled category-links">
    <li><a href="https://www.reddit.com/r/datascience/" >
      <i class="fa fa-fw fa-external-link-square fa-lg"></i> r/datascience</a></li>
    <li><a href="https://www.reddit.com/r/MachineLearning/" >
      <i class="fa fa-fw fa-external-link-square fa-lg"></i> r/machinelearning</a></li>
    <li><a href="https://www.nba.com" >
      <i class="fa fa-fw fa-external-link-square fa-lg"></i> NBA</a></li>
    <li><a href="https://www.datasciencecentral.com/" >
      <i class="fa fa-fw fa-external-link-square fa-lg"></i> DataScienceCentral</a></li>
    <li><a href="https://www.kdnuggets.com/" >
      <i class="fa fa-fw fa-external-link-square fa-lg"></i> KDnuggets</a></li>
  </ul>
<h4><i class="fa fa-tags fa-fw fa-lg"></i> Tags</h4>
<p class="tag-cloud">
      <a href="https://hexhamallstar.github.io/tag/python.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Python
      </a>
      <a href="https://hexhamallstar.github.io/tag/keras.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Keras
      </a>
      <a href="https://hexhamallstar.github.io/tag/cnn.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>CNN
      </a>
      <a href="https://hexhamallstar.github.io/tag/supervised.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Supervised
      </a>
      <a href="https://hexhamallstar.github.io/tag/classification.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Classification
      </a>
      <a href="https://hexhamallstar.github.io/tag/eda.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>EDA
      </a>
      <a href="https://hexhamallstar.github.io/tag/data-cleaning.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Data Cleaning
      </a>
      <a href="https://hexhamallstar.github.io/tag/clustering.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Clustering
      </a>
      <a href="https://hexhamallstar.github.io/tag/unsupervised.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Unsupervised
      </a>
      <a href="https://hexhamallstar.github.io/tag/nba.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>NBA
      </a>
      <a href="https://hexhamallstar.github.io/tag/basketball.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Basketball
      </a>
      <a href="https://hexhamallstar.github.io/tag/recommender-system.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Recommender System
      </a>
      <a href="https://hexhamallstar.github.io/tag/movielens.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>MovieLens
      </a>
      <a href="https://hexhamallstar.github.io/tag/collaborative-filtering.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Collaborative Filtering
      </a>
      <a href="https://hexhamallstar.github.io/tag/kaggle.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Kaggle
      </a>
      <a href="https://hexhamallstar.github.io/tag/feature-creation.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Feature Creation
      </a>
      <a href="https://hexhamallstar.github.io/tag/selenium.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Selenium
      </a>
      <a href="https://hexhamallstar.github.io/tag/webscraping.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Webscraping
      </a>
      <a href="https://hexhamallstar.github.io/tag/data-visualisation.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Data Visualisation
      </a>
      <a href="https://hexhamallstar.github.io/tag/sql.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>SQL
      </a>
      <a href="https://hexhamallstar.github.io/tag/derivation.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Derivation
      </a>
      <a href="https://hexhamallstar.github.io/tag/regression.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Regression
      </a>
      <a href="https://hexhamallstar.github.io/tag/beginner.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>Beginner
      </a>
</p>

<hr />

        </div><!--/sidebar -->
      </div><!--/row-->
    </div><!--/.container /#main-container -->

    <footer id="site-footer">
      <address id="site-colophon">
        <p class="text-center text-muted">
        Site built using <a href="http://getpelican.com/" target="_blank">Pelican</a>
        &nbsp;&bull;&nbsp; Theme based on
        <a href="http://www.voidynullness.net/page/voidy-bootstrap-pelican-theme/"
           target="_blank">VoidyBootstrap</a> by
        <a href="http://www.robertiwancz.com/"
           target="_blank">RKI</a>
        </p>
      </address><!-- /colophon  -->
    </footer>

<!-- DISQUS script for displaying comment count -->
<script type="text/javascript">
    var disqus_shortname = 'hexhamallstar-github-io';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

    <!-- javascript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>


<!-- Facebook -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

<!-- Twitter -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Google+ -->
<!-- Synchronous 
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
-->
<!-- Asynchronous -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/platform.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>  </body>
</html>